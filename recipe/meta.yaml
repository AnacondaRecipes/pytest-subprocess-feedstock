{% set name = "pytest-subprocess" %}
{% set version = "1.5.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/aklajnert/{{ name }}/archive/refs/tags/{{ version }}.tar.gz
  sha256: 80172ac95439cd4a237c5ee7f343227a7fd21fb61284bfa0de4b7802502d88dc

build:
  number: 0
  skip: true  # [py<36]
  script: {{ PYTHON }} -m pip install . --no-deps --no-build-isolation -vv

requirements:
  host:
    - python
    - pip
    - setuptools
    - wheel    
  run:
    - python
    - pytest >=4.0.0

test:
  imports:
    - pytest_subprocess
  requires:
    - pip
    - docutils >=0.12
    - pygments >=2.0
    - pytest-rerunfailures
    - pytest-asyncio >=0.15.1
    - pytest-timeout
    - anyio
  source_files:
    - tests
    - README.rst
    - docs/index.rst
  commands:
    - pip check
    - pytest -v tests

about:
  home: https://pypi.org/project/pytest-subprocess/
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: A plugin to fake subprocess for pytest
  description: |
    The plugin adds the fake_process fixture (and fp as an alias). It can be used it to register 
    subprocess results so you won't need to rely on the real processes. The plugin hooks on the 
    subprocess.Popen(), which is the base for other subprocess functions. That makes the subprocess.run(), 
    subprocess.call(), subprocess.check_call() and subprocess.check_output() methods also functional.
  dev_url: https://github.com/aklajnert/pytest-subprocess
  doc_url: https://pytest-subprocess.readthedocs.io/

extra:
  recipe-maintainers:
    - aklajnert
    - henryiii
